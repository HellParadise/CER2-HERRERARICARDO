{% extends 'base.html' %}
{% load static %}

{% block title %}Smart Events - Eventos{% endblock %}

{% block extra_css %}
<style>
  .hero-events {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 80px 0;
    margin-bottom: 40px;
  }
  
  .event-card {
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 25px;
    transition: all 0.3s ease;
    height: 100%;
    background: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
  }
  
  .event-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    border-color: #667eea;
  }
  
  .event-card.featured-event {
    border: 3px solid #ffd700;
    box-shadow: 0 4px 16px rgba(255, 215, 0, 0.3);
  }
  
  .event-card.featured-event:hover {
    box-shadow: 0 12px 24px rgba(255, 215, 0, 0.5);
  }
  
  .featured-badge {
    position: absolute;
    top: 15px;
    right: -35px;
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: #000;
    padding: 8px 45px;
    font-weight: bold;
    font-size: 0.75rem;
    transform: rotate(45deg);
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    z-index: 10;
  }
  
  .event-image {
    width: 100%;
    height: 200px;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 15px;
  }
  
  .event-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }
  
  .event-card:hover .event-image img {
    transform: scale(1.05);
  }
  
  .event-card h3 {
    color: #333;
    font-size: 1.5rem;
    margin-bottom: 15px;
    font-weight: 600;
  }
  
  .event-info {
    color: #666;
    margin: 8px 0;
    font-size: 0.95rem;
  }
  
  .event-info i {
    color: #667eea;
    margin-right: 8px;
    width: 20px;
  }
  
  .event-price {
    font-size: 1.3rem;
    font-weight: bold;
    color: #28a745;
    margin: 15px 0;
  }
  
  .event-capacity {
    background: #f8f9fa;
    padding: 8px 12px;
    border-radius: 6px;
    margin: 10px 0;
    font-size: 0.9rem;
  }
  
  .btn-join {
    width: 100%;
    padding: 12px;
    font-weight: 600;
    border-radius: 8px;
  }
</style>
{% endblock %}

{% block content %}
<section class="hero-events">
    <div class="container text-center">
      <h1 class="display-4 fw-bold mb-3">Eventos Estudiantiles</h1>
      <p class="lead">Descubre los mejores eventos cerca de ti</p>
    </div>
  </section>

  <section class="py-5">
    <div class="container">
      <div class="row">
        <div class="col-12 mb-4">
          <h2 class="text-center mb-5">Próximos Eventos</h2>
        </div>
        
        <div class="row">
          {% if events %}
            {% for event in events %}
            <div class="col-md-6 col-lg-4 mb-4">
              <div class="event-card {% if event.is_featured %}featured-event{% endif %}">
                {% if event.is_featured %}
                <div class="featured-badge">
                  <i class="bi bi-star-fill"></i> DESTACADO
                </div>
                {% endif %}
                
                {% if event.image_base64 %}
                <div class="event-image">
                  <img src="{{ event.image_base64 }}" alt="{{ event.event_name }}">
                </div>
                {% endif %}
                
                <h3>{{ event.event_name }}</h3>
                
                <p class="event-info">
                  <i class="bi bi-calendar-event"></i>
                  {{ event.event_date|date:"d/m/Y" }}
                </p>
                
                <p class="event-info">
                  <i class="bi bi-clock"></i>
                  {{ event.starts_at|time:"H:i" }} - {{ event.ends_at|time:"H:i" }}
                </p>
                
                <p class="event-info">
                  <i class="bi bi-geo-alt-fill"></i>
                  {{ event.location }}
                </p>
                
                <p class="event-info">
                  <i class="bi bi-card-text"></i>
                  {{ event.description|truncatewords:15 }}
                </p>
                
                <p class="event-price">
                  <i class="bi bi-tag-fill"></i>
                  {% if event.price == 0 %}
                    ¡Gratis!
                  {% else %}
                    ${{ event.price }}
                  {% endif %}
                </p>
                
                <div class="event-capacity">
                  <i class="bi bi-people-fill"></i>
                  {% if event.capacity %}
                    Capacidad: {{ event.attendees.count }}/{{ event.capacity }}
                    {% if event.remaining_slots > 0 %}
                      <span class="text-success">({{ event.remaining_slots }} disponibles)</span>
                    {% else %}
                      <span class="text-danger">(Completo)</span>
                    {% endif %}
                  {% else %}
                    Capacidad ilimitada
                  {% endif %}
                </div>
                
                <div class="mt-3">
                  {% if event.remaining_slots == 0 and event.capacity %}
                    <button class="btn btn-secondary btn-join" disabled>
                      <i class="bi bi-x-circle"></i> Evento Completo
                    </button>
                  {% else %}
                    <a href="{% url 'event_detail' event.id %}" class="btn btn-primary btn-join">
                      <i class="bi bi-info-circle"></i> Ver Detalles
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
            {% endfor %}
          {% else %}
            <div class="col-12 text-center">
              <div class="alert alert-info" role="alert">
                <i class="bi bi-info-circle" style="font-size: 2rem;"></i>
                <h4 class="mt-3">No hay eventos disponibles</h4>
                <p>Vuelve pronto para descubrir nuevos eventos</p>
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </section>
{% endblock %}
